# JitPack Configuration File

# Define the build environment
env:
  global:
    - ANDROID_SDK_VERSION: 30
    - ANDROID_BUILD_TOOLS_VERSION: 30.0.3
    - ANDROID_API_LEVEL: 30
    - JAVA_VERSION: 11

# Specify the build commands
script:
  # Update the package list and install dependencies
  - sudo apt-get update
  - sudo apt-get install -y openjdk-11-jdk

  # Set up the Android SDK
  - wget https://dl.google.com/android/repository/commandlinetools-linux-7302050_latest.zip
  - unzip commandlinetools-linux-7302050_latest.zip -d $ANDROID_HOME/cmdline-tools
  - yes | $ANDROID_HOME/cmdline-tools/bin/sdkmanager --sdk_root=$ANDROID_HOME --licenses
  - $ANDROID_HOME/cmdline-tools/bin/sdkmanager --update
  - $ANDROID_HOME/cmdline-tools/bin/sdkmanager "platforms;android-$ANDROID_API_LEVEL" "build-tools;$ANDROID_BUILD_TOOLS_VERSION"

  # Build the project
  - ./gradlew clean build

# Cache dependencies to speed up builds
cache:
  directories:
    - $HOME/.gradle/caches
    - $HOME/.gradle/wrapper

# Define the artifact that JitPack should deploy
artifacts:
  - build/outputs/aar/*.aar
